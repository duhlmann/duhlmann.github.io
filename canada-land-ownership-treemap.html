<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Canada Land Ownership Treemap (Pastel)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { --bg:#0b1020; --fg:#e8eefc; --muted:#a9b4ce; }
    html,body{height:100%;margin:0;background:var(--bg);color:var(--fg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif}
    .wrap{max-width:1100px;margin:24px auto;padding:0 16px}
    h1{font-size:clamp(22px,3vw,32px);margin:0 0 8px}
    p{color:var(--muted);margin:0 0 16px}
    #chart{width:100%;height:70vh;border-radius:16px;overflow:hidden;box-shadow:0 8px 24px rgba(0,0,0,.35)}
    .legend{display:flex;flex-wrap:wrap;gap:10px;margin:14px 0 0}
    .swatch{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;background:#121735;border:1px solid #1b2240;border-radius:999px}
    .dot{width:12px;height:12px;border-radius:3px;display:inline-block}
    .footer{color:var(--muted);font-size:12px;margin-top:12px}
    a{color:#9ecbff}
  </style>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
</head>
<body>
  <div class="wrap">
    <h1>Who Owns the Land in Canada?</h1>
    <p>A pastel, color-blind-friendly treemap showing the share of land by category.</p>

    <div id="chart" role="img" aria-label="Treemap of Canada land ownership shares"></div>

    <!-- Simple legend -->
    <div class="legend" aria-hidden="true">
      <span class="swatch"><i class="dot" style="background:#8dd3c7"></i> Federal (other)</span>
      <span class="swatch"><i class="dot" style="background:#ffffb3"></i> National Parks</span>
      <span class="swatch"><i class="dot" style="background:#bebada"></i> Prov/Terr (other)</span>
      <span class="swatch"><i class="dot" style="background:#fb8072"></i> Prov/Terr Conserved</span>
      <span class="swatch"><i class="dot" style="background:#80b1d3"></i> Private</span>
    </div>

    <div class="footer">Total land area used for calculations: 9.88 million km².</div>
  </div>

  <script>
    // Pastel ColorBrewer-like palette (qualitative)
    const COLORS = {
      "Federal (other)": "#8dd3c7",
      "National Parks": "#ffffb3",
      "Prov/Terr (other)": "#bebada",
      "Prov/Terr Conserved": "#fb8072",
      "Private": "#80b1d3"
    };

    // Percent shares (must sum ~100)
    const sharesPct = {
      "National Parks": 3.3,
      "Prov/Terr Conserved": 7.2,
      "Federal (other)": 8.7,
      "Prov/Terr (other)": 69.8,
      "Private": 11.0
    };

    // Total area in km²
    const TOTAL = 9_880_000;

    // Build data array with absolute areas and fixed colors
    function km2(n){ return n.toLocaleString('en-CA'); }
    function pct(n){ return n.toFixed(1).replace(/\.0$/, '') + '%'; }

    const data = Object.entries(sharesPct).map(([name, p]) => {
      const area = TOTAL * (p / 100);
      return {
        name,
        value: Math.round(area),         // value controls box size
        itemStyle: { color: COLORS[name] },
        label: { color: '#0b1020', fontWeight: 600 },
        tooltipData: { pct: p, km2: area }
      };
    });

    const chart = echarts.init(document.getElementById('chart'), null, { renderer: 'canvas' });

    const option = {
      backgroundColor: 'transparent',
      textStyle: { color: '#e8eefc' },
      tooltip: {
        trigger: 'item',
        backgroundColor: '#0b1020',
        borderColor: '#1b2240',
        textStyle: { color: '#e8eefc' },
        formatter: (info) => {
          const d = info.data.tooltipData;
          return `
            <div style="font-weight:700;margin-bottom:4px">${info.data.name}</div>
            <div>Share: ${pct(d.pct)}</div>
            <div>Area: ${km2(Math.round(d.km2))} km²</div>
          `;
        }
      },
      series: [{
        type: 'treemap',
        roam: false,
        nodeClick: false,
        breadcrumb: { show: false },
        leafDepth: 1,
        label: { show: true, formatter: '{b}', color: '#0b1020' },
        upperLabel: { show: true, color: '#0b1020' },
        itemStyle: {
          borderColor: '#0b1020',
          borderWidth: 2,
          gapWidth: 3
        },
        levels: [
          {
            itemStyle: { borderColor: '#0b1020', borderWidth: 2, gapWidth: 3 },
            upperLabel: { show: true, color: '#0b1020' }
          }
        ],
        data
      }]
    };

    chart.setOption(option);
    window.addEventListener('resize', () => chart.resize());
  </script>
</body>
</html>
      
      
            
