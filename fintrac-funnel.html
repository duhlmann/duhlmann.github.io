<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FINTRAC Reports vs Disclosures (2018–19)</title>
  <style>
    :root{ --bg:#0b0f19; --card:#121827; --text:#e5e7eb; --muted:#9aa4b2; }
    body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,Segoe UI,Roboto,Inter,sans-serif}
    .wrap{max-width:960px;margin:28px auto;padding:0 16px}
    h1{font-size:clamp(22px,4vw,30px);margin:0 0 8px}
    .box{background:var(--card);border-radius:16px;padding:16px}
    .caption{font-size:14px;color:var(--muted);margin-top:10px;line-height:1.4}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>FINTRAC Reports vs Disclosures (2018–19)</h1>
    <div class="box">
      <div id="funnel" style="height:520px;"></div>
      <div class="caption">
        From over 28 million reports received, FINTRAC made fewer than 2,000 disclosures to law enforcement,
        of which 332 went to British Columbia. (Source: Cullen Commission Interim Report, 2019)
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
  <script>
    const chart = echarts.init(document.getElementById('funnel'));

    function fmt(n){
      return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
    }

    const data = [
      { name: 'Reports Filed to FINTRAC', value: 28181435 },
      { name: 'Disclosures to Law Enforcement (Canada)', value: 1900 },
      { name: 'Disclosures to BC', value: 332 }
    ];

    const option = {
      backgroundColor: 'transparent',
      tooltip: {
        trigger: 'item',
        formatter: p => `${p.name}<br><b>${fmt(p.value)}</b>`
      },
      series: [{
        type: 'funnel',
        left: '10%',
        top: 20,
        bottom: 20,
        width: '80%',
        sort: 'descending',
        gap: 4,
        label: {
          show: true,
          position: 'inside',
          formatter: p => `${p.name}\n${fmt(p.value)}`,
          color: '#e5e7eb'
        },
        labelLine: { show: false },
        itemStyle: { borderColor: '#121827', borderWidth: 1 },
        data: data
      }]
    };

    chart.setOption(option);
    window.addEventListener('resize', () => chart.resize());
  </script>
</body>
</html>
